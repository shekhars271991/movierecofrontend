<div class="home-container">
  <h2>Welcome to the Home Page</h2>

  <button (click)="logout()">Logout</button>

  <!-- Show error message if there's any -->
  <div *ngIf="errorMessage" class="error-message">
    {{ errorMessage }}
  </div>

  <!-- Movie List -->
  <div *ngIf="movies.length > 0">
    <h3>Movie List</h3>
    <ul>
      <li *ngFor="let movie of movies">
        <strong>{{ movie.title }}</strong> ({{ movie.release_year }})
        <p>{{ movie.description }}</p>

        <!-- Action Buttons -->
        <div>
          <button (click)="setWatched(movie, true)">Seen</button>
          <button (click)="setWatched(movie, false)">Not Seen</button>

          <!-- Rating Selection (only shown if the movie is marked as seen) -->
          <div *ngIf="movie.watched">
            <label for="rating-{{ movie.id }}">Rate:</label>
            <select [(ngModel)]="movie.rating" id="rating-{{ movie.id }}">
              <option *ngFor="let r of [1, 2, 3, 4, 5]" [value]="r">{{ r }}</option>
            </select>
            <button (click)="submitRating(movie)">Submit Rating</button>
          </div>
        </div>
      </li>
    </ul>

    <!-- Pagination Controls -->
    <div class="pagination-controls">
      <button (click)="previousPage()" [disabled]="page === 1">Previous</button>
      <span>Page {{ page }} of {{ totalPages }}</span>
      <button (click)="nextPage()" [disabled]="page === totalPages">Next</button>
    </div>
  </div>

  <!-- Show message if no movies are found -->
  <div *ngIf="movies.length === 0 && !errorMessage">
    <p>No movies found.</p>
  </div>

  <!-- Navigate to recommendations page -->
  <button (click)="goToRecommendations()">View Recommendations</button>
</div>
