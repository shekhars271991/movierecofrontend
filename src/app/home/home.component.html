<div class="home-container">
  <h2>Here is a list of movies</h2>


   <!-- Top Buttons Container -->
   <div class="top-buttons">
    <button class="recommendations-button" (click)="goToRecommendations()">View Recommendations</button>
    <button class="logout-button" (click)="logout()">Logout</button>
  </div>

  <!-- Show error message if there's any -->
  <div *ngIf="errorMessage" class="error-message">
    {{ errorMessage }}
  </div>

  <!-- Movie List -->
  <div *ngIf="movies.length > 0">
    <h3>Movie List</h3>
    <ul>
      <li *ngFor="let movie of movies">
        <strong>{{ movie.title }}</strong> ({{ movie.release_year }})
        <p>{{ movie.description }}</p>

        <!-- Action Buttons -->
        <div class="action-buttons">
          <button (click)="setWatched(movie, true)">Seen</button>
          <button class="not-seen" (click)="setWatched(movie, false)">Not Seen</button>
        </div>

        <!-- Rating Selection (only shown if the movie is marked as seen) -->
        <div *ngIf="movie.watched" class="rating-section">
          <label for="rating-{{ movie.id }}">Rate:</label>
          <select [(ngModel)]="movie.rating" id="rating-{{ movie.id }}">
            <option *ngFor="let r of [1, 2, 3, 4, 5]" [value]="r">{{ r }}</option>
          </select>
          <button class="submit-rating" (click)="submitRating(movie)">Submit Rating</button>
        </div>
      </li>
    </ul>

    <!-- Pagination Controls -->
    <div class="pagination-controls">
      <button (click)="previousPage()" [disabled]="page === 1">Previous</button>
      <span>Page {{ page }} of {{ totalPages }}</span>
      <button (click)="nextPage()" [disabled]="page === totalPages">Next</button>
    </div>
  </div>

  <!-- Show message if no movies are found -->
  <div *ngIf="movies.length === 0 && !errorMessage">
    <p>No movies found.</p>
  </div>


</div>
